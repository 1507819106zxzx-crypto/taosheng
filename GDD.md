# 末日硬核生存（像素 480×270）— 游戏策划（GDD v0.1）

> 目标：先做出“可玩原型”，再逐步把系统做深做硬核。本文同时给出实现思路，方便直接落到代码里。

## 1. 核心定位
- 类型：2D 俯视角（Top-down）硬核生存 + 探索搜刮 + 枪械改装/制作 + 末日房车（移动基地）
- 美术：像素/低分辨率风（内部渲染 480×270，整数倍缩放，像素保持一致）
- 体验参考（精神内核）：搜刮—风险—撤离—升级循环；生存指标压迫；资源稀缺；伤残与治疗成本高

## 2. 核心支柱（Pillars）
1) **硬核生存压迫**：饥饿/口渴/疲劳/体温/感染/伤口，都会逼迫玩家行动与取舍  
2) **可重复探索的无限世界**：分块生成地图 + 城镇/道路/POI + 建筑内搜刮  
3) **枪械系统是主玩法**：拾取枪、弹药管理、故障/维护、配件改装、加工制作  
4) **末日房车是核心基地**：可移动、可升级、可维修、可当作“撤离与储存”核心  
5) **故事与世界事件驱动**：主线/支线、无线电、季节与灾变事件推进

## 3. 玩家循环（Core Loop）
1) 从房车/据点出发 → 2) 去建筑搜刮物资/枪械/配件 → 3) 遭遇怪物/事件 → 4) 负伤/消耗资源 →  
5) 带战利品返回房车整理/制作/修理 → 6) 推进故事线索与世界变化（季节/难度/怪物类型）→ 重复

## 4. 世界与地图（无限生成）
### 4.1 坐标与分块
- 世界为无限平面，按 **Chunk（分块）** 管理：例如 32×32 或 64×64 tiles/块
- 每个 Chunk 由 `(seed, chunk_x, chunk_y)` **确定性生成**（同一 seed 永远一致）
- 运行时只缓存玩家附近 N×N 块，远处可丢弃（需要时再生成）

### 4.2 地形与道路
- 地形层：草地/林地/水域/荒地/雪地（由噪声/规则决定）
- 道路层：连接“城镇块”与“POI块”，形成可导航的主干网（优先在块级别生成，再细化到 tile）

### 4.3 城镇与建筑（可搜刮）
建筑类型（首批）：
- 超市：食物/水/日用品/背包
- 医院：药品/绷带/消毒/手术工具（稀有）
- 监狱：近战武器/防具/少量弹药/钥匙（高风险）

建筑生成建议：
- 先用“矩形外墙 + 室内地板 + 门”作为 MVP
- 后续再加房间划分、货架/病床/牢门等家具阻挡、上锁与钥匙

### 4.4 POI（一次性大点）
- 无线电塔、研究所、坠机点、军械库、加油站、避难营地
- 与主线/支线挂钩，提供“强奖励/强危险/故事线索”

## 5. 生存系统（硬核）
### 5.1 指标
- 生命（HP）、体力（Stamina）、饥饿、口渴、疲劳、体温、感染/中毒
- 指标影响：移动速度、瞄准抖动、负重、恢复速度、昏迷/死亡

### 5.2 身体部位与“手上/腿”
- 身体部位：头/躯干/左臂/右臂/左腿/右腿（每个部位独立 HP 与伤害类型）
- 右手/左手：持枪、装填、换武器、使用物品（制作时消耗时间且可被打断）
- 腿部受伤：移动速度降低、摔倒概率上升；手臂受伤：装填变慢/后坐力更难控

## 6. 枪械系统（拾取 + 改装 + 加工）
### 6.1 枪械结构
- 枪械 = 基底（平台）+ 配件（枪口/握把/枪托/瞄具/弹匣/战术附件）
- 关键属性：伤害、射速、后坐力、散布、耐久、故障率、噪声、装填时间、弹匣容量

### 6.2 维护与故障（硬核点）
- 耐久随射击/磕碰下降；耐久低 → 卡壳概率上升
- 卡壳处理：按键清障（耗时），可能在怪堆里致命

### 6.3 加工/制作
- 工作台（房车内模块）提供：拆解→获得零件；加工→修复与升级；装配→打造自定义枪

## 7. 背包与物资
- 背包（容积/重量/格子）：先做“槽位+堆叠”的 MVP，再升级为“格子容积”硬核
- 物资类别：食物/水/药品/材料/工具/钥匙/弹药/配件
- 负重影响：移动、体力消耗、翻越能力

## 8. 怪物与生态
首批怪物（MVP）：
- 行尸：慢，群聚，咬伤感染
- 奔跑者：快，单体威胁高
- 变异体：硬直小、抗性高、掉落稀有材料

生成规则：
- 城镇/建筑内密度高；夜晚更危险；季节/事件影响怪物类型与数量

## 9. 末日房车（移动基地）
MVP：
- 世界上存在一辆房车（开局附近），可上车/下车、储物、简单制作
- 资源：燃油、电力、耐久
升级路线：
- 储物箱、工作台、医疗台、睡眠床、发电机、护甲、静音改装、车顶炮塔（后期）

## 10. 故事与任务（结构）
叙事手段：
- 无线电（每日播报/求救/谣言）、纸条/录音、NPC 交易/雇佣（后续）

主线分章（例）：
1) 找到房车并修好基本系统
2) 找到无线电塔，获得世界坐标线索
3) 前往医院/研究所获取关键药剂/抗体
4) 监狱/军械库获取重火力，准备“季节灾变”

## 11. 技术落地（pygame 实现建议）
- 内部渲染：`480×270`，显示端整数倍缩放，保持像素一致
- 世界：Chunk 缓存 + 确定性噪声生成 + 只绘制视野范围
- 数据驱动：`data/*.json` 存物品/枪械/怪物/配方/建筑掉落表
- 存档：保存 seed、玩家状态、房车状态、已探索 POI、关键剧情标记；Chunk 本身可“懒生成”

## 12. v0.1 原型实现对照（当前代码）
对应目录：`Q:\huigui\taosheng`

已实现（可玩）：
- 无限分块地图（地形噪声 + 道路网格）+ 城镇块 + 建筑外墙/地板/门（可走进）
- 地面物资生成与拾取 + 背包槽位（含像素图标）
- 枪械：9mm 手枪（拾取/装备/换弹/射击）+ 弹药计数
- 怪物：僵尸追击（基础伤害/击杀）
- 末日房车：上车/下车、驾驶、燃油消耗、四方向像素帧
- 生存指标：生命/饥饿/口渴/健康(状态)/心态/体力（HUD 条显示）+ 消耗品使用

未实现（规划中）：
- 建筑室内细分（房间/货架/牢门/上锁）、更丰富 POI
- 枪械改装/加工/耐久/故障/清障
- 身体部位伤害（手/腿影响操作）、感染/体温/睡眠等硬核项
- 故事系统（无线电/任务链/NPC）

## 13. 动画与表现规格（建议）
### 13.1 人物（像素帧）
- 视角：俯视角（Top-down）
- 朝向：上/下/左/右
- 状态：idle / walk（最少 3 帧：站立、左脚、右脚；可升级到 6 帧更顺滑）
- 规则：移动速度影响帧率；静止时锁定 idle 帧；手持枪时可按鼠标方向切换朝向

### 13.2 载具（房车）
- 朝向：上/下/左/右
- 动画：移动时 2 帧轮胎/阴影闪动，静止时 0 帧
- 上下车：靠近提示 `F 上车`，上车后以房车为控制主体

### 13.3 物品/枪械图标
- 地面掉落与背包图标使用统一像素图标（8×8 或 10×10），避免“彩色方块不识别”
- 枪械建议提供：地面图标、背包图标、手持姿态（可选）

## 14. 生存数值（原型建议，可迭代）
### 14.1 指标与范围
- 生命 HP：0–100（0 死亡）
- 饥饿：0–100（0 进入饥饿伤害）
- 口渴：0–100（0 进入脱水伤害）
- 健康(状态)：0–100（影响移动与体力恢复）
- 心态：0–100（低心态影响恢复与战斗表现）
- 体力：0–100（冲刺消耗，静息恢复）

### 14.2 衰减与惩罚（原型）
- 饥饿/口渴随时间下降；过低会让健康与心态下降
- 饥饿/口渴为 0 时持续掉血（脱水更快）
- 在房车里、远离怪物时，健康/心态有缓慢恢复（鼓励“出门—回基地”循环）

### 14.3 消耗品（原型）
- 罐头：饥饿大幅恢复 + 心态小幅提升
- 瓶装水：口渴大幅恢复
- 绷带/急救包：生命恢复（急救包更强）+ 健康/心态小幅提升
