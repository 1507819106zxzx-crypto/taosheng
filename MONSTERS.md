# 怪物设计（v0.1 草案）

目标：做出“硬核、可读、可扩展”的怪物系统——不靠堆数值吓人，而是靠感知、行为与环境压迫玩家决策。

---

## 1. 核心原则

1) **可读性**：每个怪物至少有 1 个“远看就知道”的轮廓/颜色点 + 1 个“行为信号”（音效/动作前摇/停顿）。
2) **硬核但公平**：高伤害来自明确的错误（暴露、噪音、没侦察、没规划撤离），不是随机秒杀。
3) **环境绑定**：夜晚/雨雪/季节/室内外/城市与荒野对怪物组成与强度有明显影响。
4) **群体威胁**：普通怪物靠“数量与夹击”形成压力；精英靠“技能”改变走位与战斗节奏。
5) **资源闭环**：怪物掉落与生态、玩法闭环一致（材料/零件/少量弹药/医疗消耗品），避免“刷怪爆装”破坏生存感。

---

## 2. 通用AI（所有怪物共享）

### 2.1 感知模型（Senses）
- **视觉（Sight）**：视距 `R_sight`；视锥角 `FOV`；受光照/天气/烟雾/草丛遮挡影响。
- **听觉（Hearing）**：以玩家“噪音值”扩散为圆（枪声 > 奔跑 > 行走 > 蹲走）。怪物在 `R_hear` 内进入“调查”。
- **嗅觉（Smell，可选后续）**：近距离锁定玩家方向（对潜行/黑暗仍有压迫）。

### 2.2 状态机（States）
- `Idle`：原地徘徊/站定；偶尔转向。
- `Wander`：低速随机巡逻；偏好道路/室内走廊。
- `Investigate`：前往声源点；到达后停留扫描。
- `Chase`：锁定玩家；追击 + 尝试绕障碍。
- `Attack`：攻击前摇 → 命中窗口 → 后摇；命中时造成伤害/流血/感染等。
- `Stagger`：受击硬直；精英可减免硬直。
- `Retreat`（少量怪物使用）：掉血过多短暂拉开距离再回扑（让战斗更像“狩猎”）。

### 2.3 组团逻辑（Horde）
- **唤醒半径**：被枪声吸引的怪物会“链式唤醒”附近同类（Screamer 进一步放大）。
- **夹击倾向**：同屏多个怪物时，部分个体尝试侧翼接近（避免“一条线”被风筝）。

---

## 3. 伤害与异常状态（硬核点）

### 3.1 伤害类型
- `bite`（咬伤）：伤害 + 感染概率（与防护/健康相关）。
- `slash`（抓伤）：伤害 + 流血（持续掉血，需绷带止血）。
- `blunt`（钝击）：伤害 + 眩晕/击退。
- `acid`（酸液）：直接伤害 + 装备耐久下降 + 短暂视野干扰（后续）。

### 3.2 异常状态（建议MVP先做 2 个）
- **流血**：持续掉 HP；使用 `bandage` 可止血并小幅恢复。
- **感染**：缓慢降低 `condition`；需要更稀有的药品或在房车医疗台处理（后续）。

---

## 4. 怪物名录（建议首发 6 种 + 2 种生态）

每种怪物都给出：定位、读条信号、推荐对策、掉落、生成规则。

### 4.1 行尸（Walker）
- **定位**：基础群体威胁；逼迫玩家控噪、控走位。
- **特征**：慢；受击容易硬直；会堆叠成“尸墙”。
- **攻击**：短距离抓咬（前摇明显）。
- **对策**：拉开距离逐个点杀；室内避免被堵门。
- **掉落**：少量 `scrap`、少量食物（极低概率）、布料（后续）。
- **生成**：城镇/建筑内较多；白天较少，夜晚增加。

建议参数（参考值）：
- HP 22~30；速度 20~28；攻击伤害 6~10；感知：听觉强、视距中。

### 4.2 奔跑者（Runner）
- **定位**：单体高压；打破“慢慢走”节奏。
- **特征**：快；HP 低；会直扑。
- **攻击**：冲刺咬（短前摇，命中后有明显后摇）。
- **对策**：提前发现、用障碍卡位；近距离用高伤害武器快速解决。
- **掉落**：少量弹药（很低概率）、`scrap`。
- **生成**：黄昏/夜晚；城镇边缘与道路附近更常见；雨天更活跃。

建议参数：
- HP 14~18；速度 40~55；攻击伤害 8~12；视距短但听觉强。

### 4.3 肿胀者（Bloater）
- **定位**：区域拒止；逼迫玩家改变路线。
- **特征**：慢；被击杀时“喷溅”造成小范围伤害/恶心（后续可做视野干扰）。
- **攻击**：近身抓咬 + 死亡溅射。
- **对策**：保持距离点杀；不要在狭窄室内引爆。
- **掉落**：化学材料/腐蚀性材料（后续：用于制作酸瓶/燃烧瓶）。
- **生成**：下水道/医院附近/污染区（后续POI）。

### 4.4 吐酸者（Spitter）
- **定位**：远程压制；迫使玩家掩体战。
- **特征**：会停下抬头“蓄力”再吐；吐完会后退两步。
- **攻击**：中距离直线/小抛物酸液（命中后造成伤害 + 小减速）。
- **对策**：侧向走位躲弹道；用枪优先点掉；室内利用门框卡视线。
- **掉落**：少量药品/化学品（极低概率）。
- **生成**：医院、研究所、夜晚的城镇中心。

建议参数：
- HP 16~22；速度 18~24；射程 90~130；冷却 2.2~3.2s。

### 4.5 破门者（Brute）
- **定位**：精英坦克；逼迫撤离与资源消耗。
- **特征**：大体型；抗硬直；能击退玩家；对车辆有更高威胁（后续）。
- **攻击**：重击（大前摇、范围扇形）；命中造成击退与眩晕。
- **对策**：不贪刀；利用障碍绕圈；用高穿透或爆炸物（后续）。
- **掉落**：`scrap` 大量、稀有零件（后续：车辆/枪械改装）。
- **生成**：监狱/军械库/道路事件；冬季更常见（“厚皮变异”）。

建议参数：
- HP 70~120；速度 14~20；伤害 18~30；抗硬直 60%。

### 4.6 尖啸者（Screamer）
- **定位**：战场放大器；一次失误引发尸潮。
- **特征**：发现玩家后会拉开距离并尖啸；尖啸触发周围大范围唤醒。
- **攻击**：本体弱，但“召唤”强。
- **对策**：优先击杀；避免在城镇中心开枪。
- **掉落**：很低概率掉落“线索物品”（纸条/钥匙/录音，推进剧情）。
- **生成**：夜晚城镇、特殊事件（广播塔附近）。

建议参数：
- HP 18~26；速度 22~30；尖啸冷却 8~14s；唤醒半径大。

---

## 5. 生态怪物（让世界更像“活着”）

### 5.1 野狗/狼群（Canine Pack）
- **定位**：野外威胁；逼迫玩家在荒野也保持警惕。
- **行为**：两只绕侧翼、一只正面牵制；血量低但容易流血。
- **掉落**：肉类（后续）、皮革（后续）。
- **生成**：森林/荒野；冬季更常见。

### 5.2 乌鸦（Crow）
- **定位**：信息提示；“尸体/战利品附近有乌鸦盘旋”。
- **行为**：靠近会惊飞并制造噪音，可能引来感染者。
- **掉落**：无（或羽毛后续）。

---

## 6. 生成与难度曲线

### 6.1 与季节绑定
- 春：Runner 稍多（活动性强）。
- 夏：Spitter/Bloater 稍多（腐败/污染）。
- 秋：Walker 群体规模更大（迁徙/聚集）。
- 冬：Brute 更常见（厚皮/耐寒），但整体数量略少。

### 6.2 与时间绑定
- 白天：巡逻、单体为主；视距更远。
- 夜晚：数量增加，听觉更强；Screamer 更常见。

---

## 7. 与房车系统的联动（核心体验）
- 房车开枪/引擎噪音会大范围吸怪：用“停车熄火、关灯、轻声整理”作为硬核策略。
- 房车可作为“救命门槛”：被追击时冲进房车内部休息/治疗/整理（但如果怪物围住，出门就是风险）。

---

## 8. 实现落地建议（对应 `game.py`）
- 先把 `_Zombie` 扩展成 `Monster`：增加 `kind`、`dmg`、`attack_cd`、`sense`、`state`。
- 引入 `MONSTER_DEFS`（数据表）驱动各类型参数与掉落。
- MVP：先实现 Walker + Runner（速度/HP/攻击频率差异）+ 简单尖啸者（范围唤醒）。
